<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Balance</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <main class="app" id="app">
      <header class="brand">
        <div>
          <h1>Balance</h1>
          <p>Spend like it’s cash.</p>
        </div>
        <button class="icon-button" type="button" aria-label="Settings">
          ⚙️
        </button>
      </header>

      <section class="view" data-view="onboarding">
        <h2>בואו נתחיל</h2>
        <p class="subtitle">הגדירו תקציב ותקופה כדי לדעת כמה נשאר לכם.</p>
        <label class="field">
          <span>סכום תקציב</span>
          <div class="input-with-prefix">
            <span>₪</span>
            <input
              id="onboarding-budget"
              type="number"
              inputmode="decimal"
              min="0"
              placeholder="0"
            />
          </div>
        </label>
        <div class="field">
          <span>תקופה</span>
          <div class="pill-group" role="radiogroup">
            <button class="pill" data-period="weekly" role="radio" aria-checked="true">שבועי</button>
            <button class="pill" data-period="monthly" role="radio" aria-checked="false">חודשי</button>
          </div>
        </div>
        <div class="onboarding-visual">
          <div class="mini-ring">
            <span>₪</span>
          </div>
          <div>
            <p class="visual-title">כמה נשאר לי?</p>
            <p class="subtitle">נסכם לכם בכל יום כמה נשאר מהתקציב.</p>
          </div>
        </div>
        <button class="primary" data-action="save-onboarding">שמירה והמשך</button>
      </section>

      <section class="view" data-view="home" hidden>
        <section class="summary-card">
          <div class="summary-header">
            <div>
              <p class="summary-label">יתרה נוכחית</p>
              <p class="summary-value">₪<span id="current-balance">0</span></p>
            </div>
            <div class="summary-meta">
              <p>תקציב: ₪<span id="budget-total">0</span></p>
              <p>נוצל: ₪<span id="budget-spent">0</span></p>
            </div>
          </div>
          <div class="progress" role="progressbar" aria-valuemin="0" aria-valuemax="100">
            <div class="progress-fill" id="budget-progress"></div>
          </div>
          <div class="progress-labels">
            <span id="progress-label">0% used</span>
            <span id="progress-remaining">0 left</span>
          </div>
        </section>
        <div class="balance-ring" id="balance-ring">
          <div>
            <p class="balance-amount">₪<span id="balance-left">0</span></p>
            <p class="balance-label">left today</p>
          </div>
        </div>
        <p class="reset-label" id="reset-label">Resets in 0h 00m</p>
        <button class="primary cta" data-action="add-expense">＋ Add Expense</button>
        <div class="split-actions">
          <button class="ghost" data-action="view-expenses">All Expenses</button>
          <button class="ghost">Reports</button>
        </div>
        <section>
          <h3>Recent expenses</h3>
          <div id="recent-expenses" class="expense-list empty">
            <p>No expenses yet</p>
            <span>Tap "Add expense" to get started</span>
          </div>
        </section>
      </section>

      <section class="view" data-view="expense" hidden>
        <header class="subheader">
          <button class="icon-button" data-action="cancel-expense">←</button>
          <div>
            <h2 class="view-title">New expense</h2>
            <p class="subtitle">Fill in the essentials and save.</p>
          </div>
        </header>
        <form class="expense-form" id="expense-form">
          <label class="field">
            <span>Amount</span>
            <div class="input-with-prefix">
              <span>₪</span>
              <input
                id="expense-amount-input"
                type="number"
                inputmode="decimal"
                min="0"
                step="0.01"
                placeholder="0"
                required
              />
            </div>
          </label>
          <label class="field">
            <span>Category</span>
            <select id="expense-category"></select>
          </label>
          <div class="field">
            <span class="field-hint">Popular categories</span>
            <div class="category-shortcuts" id="category-shortcuts"></div>
          </div>
          <label class="field">
            <span>Title (optional)</span>
            <input type="text" id="expense-title" placeholder="Coffee, Supermarket, Taxi..." />
          </label>
          <label class="field">
            <span>Description (optional)</span>
            <textarea id="expense-description" placeholder="Notes, vendor details, or tags..."></textarea>
          </label>
          <label class="field">
            <span>Timestamp</span>
            <input id="expense-timestamp" type="datetime-local" />
          </label>
          <p class="field-error" id="expense-error" role="alert"></p>
          <div class="footer-actions">
            <button class="ghost" type="button" data-action="cancel-expense">Cancel</button>
            <button class="primary" type="submit">✓ Save expense</button>
          </div>
        </form>
      </section>

      <section class="view" data-view="expenses" hidden>
        <header class="subheader">
          <button class="icon-button" data-action="back-home">←</button>
          <div>
            <h2 class="view-title">כל ההוצאות</h2>
            <p class="subtitle">חפשו וסננו לפי קטגוריה ותקופה.</p>
          </div>
        </header>
        <label class="field">
          <span>חיפוש לפי כותרת או תיאור</span>
          <input id="expense-search" type="search" placeholder="לדוגמה: קפה, שכירות..." />
        </label>
        <div class="filter-grid">
          <label class="field">
            <span>קטגוריה</span>
            <select id="expense-filter-category"></select>
          </label>
          <label class="field">
            <span>תקופה</span>
            <select id="expense-filter-period">
              <option value="all">כל התקופות</option>
              <option value="weekly">שבוע נוכחי</option>
              <option value="monthly">חודש נוכחי</option>
            </select>
          </label>
        </div>
        <section class="summary-card">
          <div class="summary-row">
            <div>
              <p class="summary-label">סה״כ לתקופה</p>
              <p class="summary-value">₪<span id="period-total">0</span></p>
            </div>
            <div class="summary-meta">
              <p>מספר הוצאות: <span id="period-count">0</span></p>
              <p>ממוצע להוצאה: ₪<span id="period-average">0</span></p>
            </div>
          </div>
          <div>
            <p class="summary-label">סה״כ לפי קטגוריה</p>
            <div id="category-summary" class="category-summary-list"></div>
          </div>
        </section>
        <div id="expenses-list" class="expense-list detailed empty">
          <p>לא נמצאו הוצאות</p>
          <span>נסו לשנות את הסינון או החיפוש</span>
        </div>
      </section>

      <section class="view" data-view="expense-detail" hidden>
        <header class="subheader">
          <button class="icon-button" data-action="back-expenses">←</button>
          <div>
            <h2 class="view-title">פרטי הוצאה</h2>
            <p class="subtitle">סיכום מלא של ההוצאה שבחרתם.</p>
          </div>
        </header>
        <section class="summary-card expense-detail-card">
          <div class="expense-detail-header">
            <div class="category-icon" id="detail-category-icon">💸</div>
            <div>
              <p class="summary-label" id="detail-category-name">קטגוריה</p>
              <h3 id="detail-title">הוצאה</h3>
            </div>
            <strong class="detail-amount">₪<span id="detail-amount">0</span></strong>
          </div>
          <div class="detail-body">
            <p class="detail-meta" id="detail-timestamp"></p>
            <p class="detail-description" id="detail-description"></p>
          </div>
          <form class="expense-form detail-form" id="detail-form">
            <label class="field">
              <span>סכום</span>
              <div class="input-with-prefix">
                <span>₪</span>
                <input
                  id="detail-amount-input"
                  type="number"
                  inputmode="decimal"
                  min="0"
                  step="0.01"
                  placeholder="0"
                  required
                />
              </div>
            </label>
            <label class="field">
              <span>קטגוריה</span>
              <select id="detail-category"></select>
            </label>
            <label class="field">
              <span>כותרת</span>
              <input type="text" id="detail-title-input" placeholder="לדוגמה: קפה, שכירות..." />
            </label>
            <label class="field">
              <span>תיאור</span>
              <textarea id="detail-description-input" placeholder="הוסיפו הערה או פרטים נוספים."></textarea>
            </label>
            <label class="field">
              <span>תאריך ושעה</span>
              <input id="detail-timestamp-input" type="datetime-local" />
            </label>
            <p class="field-error" id="detail-error" role="alert"></p>
            <div class="footer-actions">
              <button class="ghost detail-back" type="button" data-action="back-expenses">חזרה לרשימה</button>
              <div class="detail-actions">
                <button class="ghost danger" type="button" data-action="delete-expense">מחק הוצאה</button>
                <button class="primary" type="submit">✓ שמירת שינויים</button>
              </div>
            </div>
          </form>
        </section>
      </section>
    </main>

    <script type="module" src="app.js"></script>
  </body>
</html>
